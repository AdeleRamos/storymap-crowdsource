<!DOCTYPE html>
  <head></head>
  <body>
    <script>
      // try to match an access token in window.location.hash
      var match = (window.location.hash) ? window.location.hash.match(/access_token=([^&]+)/) : false;

      // if we found an access token in the URL pass the token up to a global function in
      if(match) {
        var credential = {
          expires: window.location.hash.match(/expires_in=([^&]+)/)[1],
          token: window.location.hash.match(/access_token=([^&]+)/)[1],
          userId: window.location.hash.match(/username=([^&]+)/)[1]
        };
        var parentWindow = (window.opener && window.opener.parent) ? window.opener.parent : window
        parentWindow.oauthCallback(credential);
      }
      window.close();
    </script>
  </body>
</html>
